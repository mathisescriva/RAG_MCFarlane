
================================================================================
  ðŸš¢ REG Yacht Code Part B - RAG System Demo
================================================================================

Maritime Regulatory Assistant POC
Demonstrating retrieval-augmented generation for compliance questions

âœ“ Loading vector store from /Users/mathisescriva/CascadeProjects/RAG_MCFarlane/data/vectorstore...
âœ“ Loaded 162 chunks
âœ“ Using SentenceTransformer embeddings (local)...
âœ“ Using OpenAI GPT for generation...

--------------------------------------------------------------------------------
  ðŸ“‹ DEMO 1: Answering Regulatory Questions
--------------------------------------------------------------------------------


[1/3] Processing question...
Q: What intact stability information must be determined for ships under REG Part B?

A: According to REG Yacht Code Part B, the following intact stability information must be determined for ships:

1. **Inclination and Stability Information**:
   - Every ship must be inclined upon completion to determine:
     - Lightship displacement.
     - Longitudinal, transverse, and vertical position of its centre of gravity (Ref: 4.3(1)).
   - The ship must comply with the requirements of Part A of the 2008 IS Code, except for dynamic stability phenomena in waves (Ref: 4.3(1)).

2. **Amendments Due to Alterations**:
   - If alterations materially affect stability information:
     - Amended stability information must be provided (Ref: 4.3(2)(a)).
     - The ship must be re-inclined if necessary (Ref: 4.3(2)(b)).
     - Re-inclination is required if deviations exceed specified values (Ref: 4.3(2)(c)).

3. **Periodical Surveys**:
   - A lightweight survey must be conducted at intervals not exceeding five years to verify changes in lightship displacement and centre of gravity (Ref: 4.3(3)(a)).
   - The ship must be re-inclined if deviations from approved stability information exceed specified thresholds (Ref: 4.3(3)(b)).

4. **Stability Information for the Master**:
   - The master must be supplied with stability information necessary for accurate guidance on stability under varying conditions (Ref: 4.4(1)).
   - This information must be:
     - Approved by the Administration or a Recognised Organisation (Ref: 4.4(2)(a)).
     - Carried onboard at all times, along with evidence of approval (Ref: 4.4(2)(b)).
   - The information must include:
     - Curves or tables of minimum operational metacentric height (GM) and maximum permissible trim versus draught (Ref: 4.4(3)(a)).
     - Instructions for operating cross-flooding arrangements (Ref: 4.4(3)(b)).
     - Additional data necessary for maintaining required intact stability (Ref: 4.4(3)(c)).
   - The stability information must also show the influence of various trims if the operational trim range exceeds +/- 0.5% of L (Ref: 4.4(4)).

5. **Compliance with Intact Stability Code**:
   - Due regard must be given to the Intact Stability Code 2008 in applying these requirements (Ref: 4.3(4) and 4.4(7)).

In summary, ships must determine and maintain comprehensive stability information, including lightship characteristics, operational limits, and compliance with regulatory standards to ensure safety and stability under various conditions.

ðŸ“š Citations: Section 4.3, Section 4.4, Section 4.23, Section 4.30
ðŸ“„ Chunks used: 5


[2/3] Processing question...
Q: What stability information must be supplied to the Master?

A: The stability information that must be supplied to the Master is outlined in Section 4.4 of the REG Yacht Code. The key requirements are as follows:

1. **General Requirements**:
   - The master shall be supplied with stability information necessary for obtaining accurate guidance on the ship's stability under varying conditions of service (Ref: 4.4(1)).
   - A copy of this stability information must be furnished to the Administration (Ref: 4.4(1)).

2. **Form and Approval**:
   - The information must be provided in a form approved by the Administration or a Recognised Organisation (Ref: 4.4(2)(a)).
   - The information, along with loading information related to ship strength, must be carried onboard at all times, with evidence of approval by the Administration (Ref: 4.4(2)(b)).

3. **Content of Stability Information**:
   - The stability information shall include:
     - Curves or tables of minimum operational metacentric height (GM) and maximum permissible trim versus draught, ensuring compliance with intact and damage stability requirements, or corresponding curves/tables for maximum allowable vertical centre of gravity (KG) (Ref: 4.4(3)(a)).
     - Instructions concerning the operation of cross-flooding arrangements (Ref: 4.4(3)(b)).
     - All other data and aids necessary to maintain required intact stability and stability after damage (Ref: 4.4(3)(c)).

4. **Trim Considerations**:
   - The stability information must show the influence of various trims if the operational trim range exceeds +/- 0.5% of the ship's length (Ref: 4.4(4)).

5. **Additional Requirements for Damage Stability**:
   - For ships that must fulfill stability requirements of Part II, the information must be determined from considerations related to the subdivision index, including minimum required GM or maximum permissible KG for various draughts (Ref: 4.4(5)).

In summary, the stability information supplied to the Master must be comprehensive, approved, and include specific data regarding metacentric height, trim, and operational instructions to ensure safe navigation and compliance with stability regulations.

ðŸ“š Citations: Section 4.4, Section 4.3, Section 4.22
ðŸ“„ Chunks used: 5


[3/3] Processing question...
Q: What are the requirements for stability in damaged condition?

A: The requirements for stability in damaged condition are outlined in Section 4.30 of the REG Yacht Code. The key points are as follows:

1. **Intact Stability Requirements**:
   - Sufficient intact stability must be provided to withstand the final stage of flooding of any one main compartment within the floodable length (Ref: 4.30(1)).
   - If two adjacent main compartments are flooded, the intact stability must be adequate to withstand flooding of both compartments if they are separated by a stepped bulkhead (Ref: 4.30(2)).
   - For a required factor of subdivision between 0.5 and 0.33, stability must withstand flooding of any two adjacent compartments (Ref: 4.30(3)).
   - For a required factor of subdivision of 0.33 or less, stability must withstand flooding of any three adjacent compartments (Ref: 4.30(4)).

2. **Calculations for Stability**:
   - Stability calculations must consider the ship's proportions, design characteristics, and the arrangement of damaged compartments, assuming the worst anticipated service condition (Ref: 4.30(5)).
   - If decks or bulkheads restrict water flow, the Administration must be satisfied that this is considered in the calculations (Ref: 4.30(6)).

3. **Residual Righting Lever Curve**:
   - After damage, the positive residual righting lever curve must have a minimum range of 15Â° beyond the angle of equilibrium, which can be reduced to 10Â° under certain conditions (Ref: 4.30(7)).
   - The area under the righting lever curve must be at least 0.015 metre-radians, measured from the angle of equilibrium to the angle at which flooding occurs or specified angles for flooding scenarios (Ref: 4.30(8)).

4. **Heeling Moments**:
   - The residual righting lever must account for heeling moments from passenger crowding, launching of survival craft, and wind pressure (Ref: 4.30(9)).
   - Specific assumptions for calculating heeling moments are provided, including passenger distribution and wind pressure application (Ref: 4.30(10)).

5. **Assumed Extent of Damage**:
   - The assumed extent of damage includes longitudinal, transverse, and vertical dimensions, with specific criteria based on the required factor of subdivision (Ref: 4.30(12)).

6. **Unsymmetrical Flooding**:
   - Provisions for unsymmetrical flooding include minimizing such flooding, ensuring self-acting means for correcting heel, and maintaining a maximum angle of heel after flooding (Ref: 4.30(13)).

7. **Final Conditions After Damage**:
   - For symmetrical flooding, a positive metacentric height of at least 50 mm is required; for unsymmetrical flooding, specific angles of heel are permitted (Ref: 4.30(14)).
   - The margin line must not be submerged in the final stage of flooding (Ref: 4.30(14)(c)).

8. **Master's Responsibilities**:
   - The master must be supplied with data necessary to maintain sufficient intact stability and be informed of conditions affecting stability (Ref: 4.30(15) and 4.30(16)).

9. **Draught Marks and Stability Verification**:
   - Draught marks must be provided for assessing the condition and trim of the vessel (Ref: 4.30(17)).
   - The master must determine the ship's trim and stability before departure, ensuring compliance with approved stability criteria (Ref: 4.30(20)).

10. **Relaxation of Requirements**:
    - Relaxations from damage stability requirements may only be considered in exceptional cases, with the Administration's satisfaction on the ship's stability characteristics (Ref: 4.30(21) and 4.30(22)).

These requirements ensure that a yacht maintains adequate stability under various conditions of damage, thereby enhancing safety for passengers and crew.

ðŸ“š Citations: Section 4.30, Section 4.4, Section 4.3, Section 4.22
ðŸ“„ Chunks used: 5


--------------------------------------------------------------------------------
  âœ… DEMO 2: Generating Compliance Checklist
--------------------------------------------------------------------------------

Yacht Specification: 50m yacht GE50 with 20 persons under Red Ensign Group

Compliance Checklist:
### Compliance Checklist for 50m Yacht GE50 with 20 Persons under Red Ensign Group

1. **Intact Stability Criteria**
   - **Section Reference:** Ref: 4.3
   - **Applies to <36 Persons:** Yes
   - **Description:** The yacht must be inclined upon completion to determine lightship displacement and the position of its center of gravity. Compliance with the Intact Stability Code is required.

2. **Stability Information to be Supplied to the Master**
   - **Section Reference:** Ref: 4.4
   - **Applies to <36 Persons:** Yes
   - **Description:** The master must be provided with stability information, including curves or tables of minimum operational metacentric height (GM) and maximum permissible trim versus draught.

3. **Stability in Damaged Condition**
   - **Section Reference:** Ref: 4.30
   - **Applies to <36 Persons:** Yes
   - **Description:** The yacht must maintain sufficient intact stability to withstand flooding of compartments as specified, including calculations for various damage scenarios.

4. **Required Subdivision Index**
   - **Section Reference:** Ref: 4.5
   - **Applies to <36 Persons:** Yes
   - **Description:** The yacht must have a sufficient degree of subdivision determined by the required subdivision index R, ensuring safety in case of flooding.

5. **Attained Subdivision Index**
   - **Section Reference:** Ref: 4.6
   - **Applies to <36 Persons:** Yes
   - **Description:** The yacht's attained subdivision index A must be calculated and must not be less than the required index R.

6. **Enhanced Survivability Standards**
   - **Section Reference:** Ref: 4.31
   - **Applies to <36 Persons:** Yes
   - **Description:** The yacht must meet enhanced survivability standards, ensuring stability and safety during flooding of adjacent compartments.

7. **Maximum Floodable Length**
   - **Section Reference:** Ref: 4.32
   - **Applies to <36 Persons:** Yes
   - **Description:** The yacht must comply with maximum floodable length requirements, ensuring that flooding does not compromise stability.

8. **Machinery Installations Compliance**
   - **Section Reference:** Ref: 5.1
   - **Applies to <36 Persons:** Yes
   - **Description:** The yacht must comply with applicable requirements of SOLAS Chapter II-1 regarding machinery installations.

9. **Crew Qualifications**
   - **Section Reference:** Ref: 10.3
   - **Applies to <36 Persons:** Yes
   - **Description:** All crew members must hold STCW qualifications as specified, ensuring proper training for safety and emergency situations.

10. **Operational Area Compliance**
    - **Section Reference:** Ref: 4.4
    - **Applies to <36 Persons:** Yes
    - **Description:** The yacht must operate within the defined operational area limits, ensuring safety and compliance with regulations.

This checklist ensures that the yacht GE50 with 20 persons complies with the relevant sections of the REG Yacht Code Part B.

ðŸ“š Sections covered: 4.4, 4.30, 4.3

--------------------------------------------------------------------------------
  ðŸ” DEMO 3: REG vs Malta PYC Comparison
--------------------------------------------------------------------------------

Comparison Table:
| Requirement/Criterion               | REG Requirement                                                                                     | Malta PYC Requirement                                                                                     | Key Differences                                                                                                   | Section References                     |
|-------------------------------------|----------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------|----------------------------------------|
| Intact Stability                    | Sufficient intact stability to withstand flooding of main compartments (Ref: 4.30)                 | Positive stability up to 30 degrees heel angle (Ref: 4.3)                                               | REG does not specify a heel angle limit; Malta PYC specifies 30 degrees.                                         | REG: 4.30; Malta: 4.3                 |
| Minimum GM                          | No specific minimum GM stated; stability calculations required (Ref: 4.30)                        | Minimum GM of 0.15m for yachts under 50m (Ref: 4.3)                                                     | REG does not specify a minimum GM, while Malta PYC has a clear requirement for yachts under 50m.                  | REG: 4.30; Malta: 4.3                 |
| Stability Information               | Stability information must be supplied to the master (Ref: 4.4)                                   | Master must receive stability booklet with loading instructions (Ref: 4.4)                                | Both require stability information, but REG emphasizes the need for approval by the Administration.               | REG: 4.4; Malta: 4.4                   |
| Damage Stability                    | Intact stability must withstand flooding of compartments; positive residual righting lever curve (Ref: 4.30) | Yachts must remain stable with one compartment flooded; positive righting moment up to 20 degrees (Ref: 4.30) | REG allows for more complex damage stability calculations, while Malta PYC has a simpler requirement for one compartment flooding. | REG: 4.30; Malta: 4.30                 |
| Damage Control                      | No specific requirement for damage control plans mentioned                                          | Damage control plans must be posted; crew training required (Ref: 4.22)                                 | Malta PYC explicitly requires damage control plans and crew training, while REG does not mention these explicitly. | Malta: 4.22                            |
| Loading Procedures                  | Master must verify compliance with stability criteria before departure (Ref: 4.23)                  | Loading procedures must be documented and approved; master must verify compliance (Ref: 4.23)           | Both require verification by the master, but Malta PYC emphasizes documentation and approval of loading procedures. | REG: 4.23; Malta: 4.23                 |
| Watertight Integrity                | No specific requirement for watertight doors mentioned                                              | Watertight doors must be tested monthly; inspection records must be maintained (Ref: 4.24)               | Malta PYC has specific requirements for testing and maintaining records for watertight doors, which REG lacks.   | Malta: 4.24                            |

ðŸ“š REG sections analyzed: 4.4, 4.30, 4.3, 4.23
â„¹ï¸  Malta PYC text is a demonstration stub for comparison purposes

================================================================================
  âœ¨ Demo Complete
================================================================================


System Capabilities Demonstrated:
  âœ“ PDF extraction and chunking
  âœ“ Semantic search with cosine similarity
  âœ“ Regulatory Q&A with citations
  âœ“ Compliance checklist generation
  âœ“ Cross-flag regulation comparison

================================================================================
